import{a as $,b as A,c as j}from"./chunk-H2RTCBOC.js";import{x as E}from"./chunk-XEMT2TAH.js";import{i as I,j as k}from"./chunk-UAJSEZC7.js";import"./chunk-BUT5SPGI.js";import"./chunk-NMGI7OHJ.js";import{$a as l,Cb as C,Eb as O,K as d,Ka as p,Kb as M,Lb as S,W as _,Ya as x,_ as v,eb as a,fb as c,g as h,k as f,lb as b,lc as y,nc as F,pc as w,r as P,s as u,ub as g,vb as m}from"./chunk-OGU7RAAO.js";var D=s=>({"background-image":s});function N(s,z){if(s&1&&(a(0,"div",5)(1,"div",6)(2,"h2",7),g(3),c(),a(4,"div",8)(5,"span",9),g(6),c(),a(7,"p",10),g(8),c()()()()),s&2){let e=z.$implicit;l("ngStyle",O(4,D,"url("+e.images.posterArt.url+")")),p(3),m(e.title),p(3),m(e.releaseYear),p(2),m(e.description)}}var ee=(()=>{class s{contentService=_($);formService=_(E);filterForm=this.formService.filterForm;series$=this.contentService.getSeries();filteredSeries$=new h;currentPageSubject=new f(1);currentPage$=this.currentPageSubject.asObservable();itemsPerPage=10;totalItems=0;visiblePages=[];currentPage=1;ngOnInit(){this.setupFilterObservables()}setupFilterObservables(){let e=this.filterForm.controls.search.valueChanges.pipe(d("")),t=this.filterForm.controls.year.valueChanges.pipe(d(""));this.filteredSeries$=u([this.series$,e,t,this.currentPage$]).pipe(P(([i,n,r,o])=>this.filterAndPaginateSeries(i,n,r,o)))}filterAndPaginateSeries(e,t,i,n){let{filteredMovies:r,totalItems:o}=this.contentService.filterAndPaginateMovies(e,t,+i,n,this.itemsPerPage);return this.totalItems=o,this.currentPage=n,this.updateVisiblePages(n),r}changePage(e){this.currentPageSubject.next(e)}get pages(){return Array(Math.ceil(this.totalItems/this.itemsPerPage)).fill(0).map((e,t)=>t+1)}updateVisiblePages(e){let t=this.pages.length,i=5,n,r;if(t<=i)n=1,r=t;else{let o=Math.floor(i/2);e<=o?(n=1,r=i):e+o>=t?(n=t-i+1,r=t):(n=e-o,r=e+o)}this.visiblePages=Array.from({length:r-n+1},(o,V)=>n+V)}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=v({type:s,selectors:[["app-series"]],standalone:!0,features:[C],decls:7,vars:7,consts:[[1,"series"],[1,"series_title"],[1,"series_block"],["class","series_card",3,"ngStyle",4,"ngFor","ngForOf"],[3,"changePageEmitter","pages","currentPage","visiblePages"],[1,"series_card",3,"ngStyle"],[1,"series_card_description"],[1,"series_card_description_title"],[1,"series_card_description_content"],[1,"series_card_description_year"],[1,"series_card_description_year_text"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"h1",1),g(2,"Popular Series"),c(),a(3,"div",2),x(4,N,9,6,"div",3),M(5,"async"),c(),a(6,"app-pagination",4),b("changePageEmitter",function(r){return i.changePage(r)}),c()()),t&2&&(l("@fadeInOutAnimation",!0),p(4),l("ngForOf",S(5,5,i.filteredSeries$)),p(2),l("pages",i.pages)("currentPage",i.currentPage)("visiblePages",i.visiblePages))},dependencies:[w,I,y,k,F,A],styles:["[_nghost-%COMP%]   .series_block[_ngcontent-%COMP%]{--columns: 4;display:grid;gap:10px;grid-template-columns:repeat(var(--columns),minmax(170px,auto));width:100%;max-width:1200px;margin-inline:auto;margin-top:10px;min-height:600px}@media (min-width: 1260px){[_nghost-%COMP%]   .series_block[_ngcontent-%COMP%]{--columns: 5;gap:10px}}[_nghost-%COMP%]   .series_title[_ngcontent-%COMP%]{max-width:1200px;margin:auto;font-size:20px}[_nghost-%COMP%]   .series_card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:end;width:230px;height:320px;object-fit:contain;background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:3px;cursor:pointer;position:relative}[_nghost-%COMP%]   .series_card[_ngcontent-%COMP%]:hover   .series_card_description_content[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}[_nghost-%COMP%]   .series_card[_ngcontent-%COMP%]:hover   .series_card_description[_ngcontent-%COMP%]{max-height:150px;height:100%}[_nghost-%COMP%]   .series_card_description[_ngcontent-%COMP%]{background-color:#00000080;padding:15px}[_nghost-%COMP%]   .series_card_description_title[_ngcontent-%COMP%]{font-size:17px}[_nghost-%COMP%]   .series_card_description_content[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:15px;right:15px;opacity:0;transform:translateY(20px);transition:opacity .3s ease,transform .3s ease}[_nghost-%COMP%]   .series_card_description_year_text[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis;line-height:1.2;max-height:3.6rem}[_nghost-%COMP%]   .no-series-message[_ngcontent-%COMP%]{text-align:center;font-size:26px}"],data:{animation:[j]}})}return s})();export{ee as SeriesComponent};
