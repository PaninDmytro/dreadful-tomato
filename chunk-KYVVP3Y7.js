import{a as k,b as $,c as E}from"./chunk-H2RTCBOC.js";import{x as A}from"./chunk-XEMT2TAH.js";import{j as I}from"./chunk-UAJSEZC7.js";import"./chunk-BUT5SPGI.js";import"./chunk-NMGI7OHJ.js";import{$a as p,Cb as x,Eb as C,K as d,Ka as s,Kb as O,Lb as y,W as v,Ya as M,_ as u,eb as c,fb as m,g as _,k as h,lb as b,lc as S,nc as F,pc as w,r as f,s as P,ub as l,vb as g}from"./chunk-OGU7RAAO.js";var D=r=>({"background-image":r});function N(r,j){if(r&1&&(c(0,"div",5)(1,"div",6)(2,"h2",7),l(3),m(),c(4,"div",8)(5,"span",9),l(6),m(),c(7,"p",10),l(8),m()()()()),r&2){let e=j.$implicit;p("ngStyle",C(4,D,"url("+e.images.posterArt.url+")")),s(3),g(e.title),s(3),g(e.releaseYear),s(2),g(e.description)}}var te=(()=>{class r{contentService=v(k);formService=v(A);movies$=this.contentService.getMovies();filterForm=this.formService.filterForm;filteredMovies$=new _;currentPageSubject=new h(1);currentPage$=this.currentPageSubject.asObservable();itemsPerPage=10;totalItems=0;visiblePages=[];currentPage=0;ngOnInit(){this.setupFilterObservables()}setupFilterObservables(){let e=this.filterForm.controls.search.valueChanges.pipe(d("")),t=this.filterForm.controls.year.valueChanges.pipe(d(""));this.filteredMovies$=P([this.movies$,e,t,this.currentPage$]).pipe(f(([i,n,o,a])=>this.filterAndPaginateMovies(i,n,o,a)))}filterAndPaginateMovies(e,t,i,n){let{filteredMovies:o,totalItems:a}=this.contentService.filterAndPaginateMovies(e,t,+i,n,this.itemsPerPage);return this.totalItems=a,this.currentPage=n,this.updateVisiblePages(n),o}changePage(e){this.currentPageSubject.next(e)}get pages(){return Array(Math.ceil(this.totalItems/this.itemsPerPage)).fill(0).map((e,t)=>t+1)}updateVisiblePages(e){let t=this.pages.length,i=5,n,o;if(t<=i)n=1,o=t;else{let a=Math.floor(i/2);e<=a?(n=1,o=i):e+a>=t?(n=t-i+1,o=t):(n=e-a,o=e+a)}this.visiblePages=Array.from({length:o-n+1},(a,z)=>n+z)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["app-movies"]],standalone:!0,features:[x],decls:7,vars:7,consts:[[1,"movies"],[1,"movies_title"],[1,"movies_block"],["class","movies_card",3,"ngStyle",4,"ngFor","ngForOf"],[3,"changePageEmitter","pages","currentPage","visiblePages"],[1,"movies_card",3,"ngStyle"],[1,"movies_card_description"],[1,"movies_card_description_title"],[1,"movies_card_description_content"],[1,"movies_card_description_year"],[1,"movies_card_description_year_text"]],template:function(t,i){t&1&&(c(0,"div",0)(1,"h1",1),l(2,"Popular Series"),m(),c(3,"div",2),M(4,N,9,6,"div",3),O(5,"async"),m(),c(6,"app-pagination",4),b("changePageEmitter",function(o){return i.changePage(o)}),m()()),t&2&&(s(3),p("@fadeInOutAnimation",!0),s(),p("ngForOf",y(5,5,i.filteredMovies$)),s(2),p("pages",i.pages)("currentPage",i.currentPage)("visiblePages",i.visiblePages))},dependencies:[w,S,F,I,$],styles:["[_nghost-%COMP%]   .movies[_ngcontent-%COMP%]{background-color:#14141499}[_nghost-%COMP%]   .movies_title[_ngcontent-%COMP%]{max-width:1200px;margin:auto;font-size:20px}[_nghost-%COMP%]   .movies_block[_ngcontent-%COMP%]{--columns: 4;display:grid;gap:10px;grid-template-columns:repeat(var(--columns),minmax(170px,auto));width:100%;max-width:1200px;margin-inline:auto;margin-top:10px;min-height:600px}@media (min-width: 1260px){[_nghost-%COMP%]   .movies_block[_ngcontent-%COMP%]{--columns: 5;gap:10px}}[_nghost-%COMP%]   .movies_card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:end;width:230px;height:100%;max-height:320px;object-fit:contain;background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:3px;cursor:pointer;position:relative;overflow:hidden}[_nghost-%COMP%]   .movies_card[_ngcontent-%COMP%]:hover   .movies_card_description_content[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}[_nghost-%COMP%]   .movies_card[_ngcontent-%COMP%]:hover   .movies_card_description[_ngcontent-%COMP%]{max-height:150px;height:100%}[_nghost-%COMP%]   .movies_card_description[_ngcontent-%COMP%]{background-color:#00000080;padding:15px}[_nghost-%COMP%]   .movies_card_description_title[_ngcontent-%COMP%]{font-size:17px}[_nghost-%COMP%]   .movies_card_description_content[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:15px;right:15px;opacity:0;transform:translateY(20px);transition:opacity .3s ease,transform .3s ease}[_nghost-%COMP%]   .movies_card_description_year_text[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis;line-height:1.2;max-height:3.6rem}"],data:{animation:[E]}})}return r})();export{te as MoviesComponent};
